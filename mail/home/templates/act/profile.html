{% extends "act/base.html" %}
{% load static %}

{% block title %}User Profile{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card shadow-lg p-3" style="border-radius: 15px; backdrop-filter: blur(8px); background: rgba(17,24,39,0.85); color: #fff;">
        <div class="row g-0">
          
          <!-- LEFT COLUMN -->
          <div class="col-md-4 text-center border-end d-flex flex-column align-items-center justify-content-center py-4">
            {% if user.profile_image %}
              <img src="{{ user.profile_image.url }}" class="rounded-circle img-fluid mb-3" style="width: 150px; height: 150px; object-fit: cover; border: 4px solid #4ccead;">
            {% else %}
              <img src="{% static 'images/default-avatar.png' %}" class="rounded-circle img-fluid mb-3" style="width: 150px; height: 150px; object-fit: cover; border: 4px solid #4ccead;">
            {% endif %}
            
            <h3 class="text-success">{{ user.first_name }} {{ user.last_name }}</h3>
            <p class="text-light small">{{ user.email }}</p>

            <a href="{% url 'home' %}" class="btn btn-info mt-3 w-75 rounded-pill">Back to Dashboard</a>

            <!-- ðŸŸ¢ Profile Completion Section -->
            <div class="profile-section d-flex flex-column align-items-center justify-content-center mt-4">
              <small class="text-white fw-bold">Profile Completion</small>
              <div class="progress mt-2" style="width: 120px; height: 8px; border-radius: 10px; overflow: hidden;">
                <div class="progress-bar bg-success" 
                     role="progressbar" 
                     style="width: {{ profile_completion|default:'70' }}%;" 
                     aria-valuenow="{{ profile_completion|default:'70' }}" 
                     aria-valuemin="0" 
                     aria-valuemax="100"></div>
              </div>
              <small class="text-success fw-semibold mt-1">{{ profile_completion|default:'70' }}%</small>
            </div>
          </div>

          <!-- RIGHT COLUMN -->
          <div class="col-md-8 p-4">
            <h4 class="mb-3 text-success">Profile Details</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <div class="card bg-dark text-light h-100">
                  <div class="card-body">
                    <h6 class="card-title text-success">First Name</h6>
                    <p class="card-text">{{ user.first_name|default:"Not Provided" }}</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="card bg-dark text-light h-100">
                  <div class="card-body">
                    <h6 class="card-title text-success">Last Name</h6>
                    <p class="card-text">{{ user.last_name|default:"Not Provided" }}</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="card bg-dark text-light h-100">
                  <div class="card-body">
                    <h6 class="card-title text-success">Date of Birth</h6>
                    <p class="card-text">{{ user.date_of_birth|date:"F d, Y"|default:"Not Provided" }}</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="card bg-dark text-light h-100">
                  <div class="card-body">
                    <h6 class="card-title text-success">Phone Number</h6>
                    <p class="card-text">{{ user.phone|default:"Not Provided" }}</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="card bg-dark text-light h-100">
                  <div class="card-body">
                    <h6 class="card-title text-success">Organization</h6>
                    <p class="card-text">{{ user.organization|default:"Not Provided" }}</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="card bg-dark text-light h-100">
                  <div class="card-body">
                    <h6 class="card-title text-success">Email Host Password</h6>
                    <p class="card-text">{% if user.email_pass %}********{% else %}Not Set{% endif %}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Options -->
            <div class="d-flex flex-wrap gap-2 mt-3">
              <a href="{% url 'edit_profile' %}" class="btn btn-success flex-grow-1">Edit Profile</a>
              <a href="{% url 'change_password' %}" class="btn btn-success flex-grow-1">Change Password</a>
              <a href="{% url 'help' %}" class="btn btn-success flex-grow-1">Customer Support</a>
              <a href="{% url 'login' %}" class="btn btn-danger flex-grow-1">Logout</a>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
